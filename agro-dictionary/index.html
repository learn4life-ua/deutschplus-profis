<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Професійний словник: Ґрунти, посів, урожай</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .highlight { background-color:#fde047; border-radius:.25rem; padding:0 .25rem; }
  </style>
</head>
<body class="bg-gray-200 text-gray-800">
  <div class="container mx-auto p-4 md:p-8 lg:p-12">
    <!-- Заголовок -->
    <header class="text-center mb-8">
      <h1 class="text-4xl md:text-5xl font-extrabold mb-2 leading-tight">
        <span class="text-gray-900">Deutsch</span>
        <span class="text-green-600">+</span>
        <span class="text-gray-900">Profis</span>
      </h1>
      <p class="text-lg md:text-xl text-gray-600">
        Професійний словник: Ґрунти, посів, урожай
      </p>
    </header>

    <!-- Пошук -->
    <div class="mb-6">
      <input id="searchInput" type="text" placeholder="Пошук слів..."
             class="w-full px-4 py-3 rounded-xl shadow-md border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-green-500 transition duration-300">
    </div>

    <!-- Контейнер для карток -->
    <div id="cardsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </div>

  <script>
    const dictionaryData = [
      { german:"der Boden", ukrainian:"ґрунт", sentence:"Der Boden ist fruchtbar.", id:"audio/01_Der_Boden_ist_fruchtbar.mp3" },
      { german:"die Fruchtbarkeit", ukrainian:"родючість", sentence:"Die Fruchtbarkeit des Bodens ist wichtig.", id:"audio/02_Die_Fruchtbarkeit_des_Bodens_ist_wichtig.mp3" },
      { german:"der Acker", ukrainian:"рілля", sentence:"Der Acker wurde gepflügt.", id:"audio/03_Der_Acker_wurde_gepflügt.mp3" },
      { german:"die Aussaat", ukrainian:"посів", sentence:"Die Aussaat beginnt im Frühling.", id:"audio/04_Die_Aussaat_beginnt_im_Frühling.mp3" },
      { german:"säen", ukrainian:"сіяти", sentence:"Wir säen das Saatgut im April.", id:"audio/05_Wir_säen_das_Saatgut_im_April.mp3" },
      { german:"das Saatgut", ukrainian:"посівний матеріал", sentence:"Das Saatgut ist zertifiziert.", id:"audio/06_Das_Saatgut_ist_zertifiziert.mp3" },
      { german:"die Bodenbearbeitung", ukrainian:"обробіток ґрунту", sentence:"Die Bodenbearbeitung verbessert die Erträge.", id:"audio/07_Die_Bodenbearbeitung_verbessert_die_Erträge.mp3" },
      { german:"pflügen", ukrainian:"орати", sentence:"Wir pflügen das Feld heute.", id:"audio/08_Wir_pflügen_das_Feld_heute.mp3" },
      { german:"die Krume", ukrainian:"структура ґрунту", sentence:"Die Krume ist gut strukturiert.", id:"audio/09_Die_Krume_ist_gut_strukturiert.mp3" },
      { german:"der Humus", ukrainian:"гумус", sentence:"Der Boden enthält viel Humus.", id:"audio/10_Der_Boden_enthält_viel_Humus.mp3" },
      { german:"die Bodenprobe", ukrainian:"аналіз ґрунту", sentence:"Wir machen eine Bodenprobe.", id:"audio/11_Wir_machen_eine_Bodenprobe.mp3" },
      { german:"das Feld", ukrainian:"поле", sentence:"Das Feld ist bereit zur Aussaat.", id:"audio/12_Das_Feld_ist_bereit_zur_Aussaat.mp3" },
      { german:"locker", ukrainian:"пухкий", sentence:"Ein lockerer Boden speichert Wasser gut.", id:"audio/13_Ein_lockerer_Boden_speichert_Wasser_gut.mp3" },
      { german:"der Ertrag", ukrainian:"урожай", sentence:"Der Ertrag war sehr hoch.", id:"audio/14_Der_Ertrag_war_sehr_hoch.mp3" },
      { german:"die Ertragssteigerung", ukrainian:"підвищення врожайності", sentence:"Die Ertragssteigerung ist ein Ziel.", id:"audio/15_Die_Ertragssteigerung_ist_ein_Ziel.mp3" },
      { german:"die Kulturpflanze", ukrainian:"культурна рослина", sentence:"Diese Kulturpflanze wächst schnell.", id:"audio/16_Diese_Kulturpflanze_wächst_schnell.mp3" },
      { german:"anbauen", ukrainian:"вирощувати", sentence:"Wir bauen Weizen an.", id:"audio/17_Wir_bauen_Weizen_an.mp3" },
      { german:"der Nährstoff", ukrainian:"поживна речовина", sentence:"Pflanzen benötigen Nährstoffe zum Wachsen.", id:"audio/18_Pflanzen_benötigen_Nährstoffe_zum_Wachsen.mp3" },
      { german:"die Feuchtigkeit", ukrainian:"вологість", sentence:"Wir müssen die Feuchtigkeit des Bodens messen.", id:"audio/19_Wir_müssen_die_Feuchtigkeit_des_Bodens_messen.mp3" },
      { german:"bewässern", ukrainian:"зрошувати", sentence:"Es ist wichtig, das Feld regelmäßig zu bewässern.", id:"audio/20_Es_ist_wichtig_das_Feld_regelmäßig_zu_bewässern.mp3" }
    ];

    const escapeHtml = (s='') => s.replace(/[&<>"']/g, ch => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch]));
    const escapeRegex = (s='') => s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

    function highlightText(text, filter) {
      if (!filter) return escapeHtml(text);
      const safeFilter = escapeRegex(filter);
      const re = new RegExp(`(${safeFilter})`, 'gi');
      return escapeHtml(text).replace(re, '<span class="highlight">$1</span>');
    }

    function renderCards(filter = "") {
      const cards = document.getElementById('cardsContainer');
      cards.innerHTML = '';

      const filtered = dictionaryData.filter(item => {
        const search = `${item.german} ${item.ukrainian} ${item.sentence}`.toLowerCase();
        return search.includes(filter.toLowerCase());
      });

      filtered.forEach(item => {
        const hasAudio = !!item.id;
        const audioHtml = hasAudio
          ? `<div class="rounded-xl overflow-hidden shadow-inner w-full">
               <audio controls preload="none" class="w-full">
                 <source src="${item.id}" type="audio/mpeg">
                 Ваш браузер не підтримує аудіо елемент.
               </audio>
             </div>`
          : `<p class="text-gray-400 text-sm italic">Аудіо відсутнє</p>`;

        const card = document.createElement('div');
        card.className = "bg-white rounded-2xl p-6 flex flex-col gap-2 transition-all duration-300 hover:shadow-lg hover:scale-[1.01]";
        card.innerHTML = `
          <span class="block text-center bg-green-100 text-green-700 text-sm font-semibold px-3 py-1 rounded-full w-fit mx-auto mb-2">#Агрономія</span>
          <h2 class="text-2xl font-bold text-green-800 text-center">${highlightText(item.german, filter)}</h2>
          <p class="text-gray-600 text-sm"><strong>Переклад:</strong> ${highlightText(item.ukrainian, filter)}</p>
          <p class="text-gray-700 text-center mt-2"><strong>Приклад:</strong> ${highlightText(item.sentence, filter)}</p>
          ${audioHtml}
        `;
        cards.appendChild(card);
      });

      if (!filtered.length) {
        const empty = document.createElement('div');
        empty.className = "col-span-full text-center text-gray-500 italic";
        empty.textContent = "Нічого не знайдено. Спробуйте інший запит.";
        cards.appendChild(empty);
      }
    }

    function debounce(fn, wait=200) {
      let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), wait); };
    }

    window.addEventListener('load', () => {
      renderCards();
      const search = document.getElementById('searchInput');
      search.addEventListener('input', debounce(() => renderCards(search.value.trim()), 200));
    });
  </script>

  <!-- Футер -->
  <footer class="text-center text-gray-500 text-sm mt-12 mb-6">
    <p>© 2025 Deutsch+Profis. Усі права захищені.</p>
  </footer>
</body>
</html>
